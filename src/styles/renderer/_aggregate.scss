@import '../vars';
@import '../icons/index';

.#{$engine_css_prefix}-td[data-renderer=aggregate] {
  text-align: center;
  position: relative;
  overflow-x: unset;

  &::after {
    content: '';
    position: absolute;
    pointer-events: none;
    top: 0;
    width: $lu_aggregate_square_bracket_width;
    right: 0;
    bottom: 0;
    border-left: $lu_aggregate_square_bracket_stroke_width solid $lu_aggregate_square_bracket_stroke_color;
  }
}

.#{$engine_css_prefix}-tr[data-meta~=first] >.#{$engine_css_prefix}-td[data-renderer=aggregate] {
  cursor: pointer;

  &::before {
    @include lu_icons();

    content: $lu_icon_caret_down;
    padding-right: $lu_aggregate_square_bracket_width;
  }

  &::after {
    border-top: $lu_aggregate_square_bracket_stroke_width solid $lu_aggregate_square_bracket_stroke_color;
  }
}

.#{$engine_css_prefix}-tr[data-meta=last] >.#{$engine_css_prefix}-td[data-renderer=aggregate] {
    &::after {
      border-bottom: $lu_aggregate_square_bracket_stroke_width solid $lu_aggregate_square_bracket_stroke_color;
    }
  }

.#{$engine_css_prefix}-tr[data-meta='first last'] >.#{$engine_css_prefix}-td[data-renderer=aggregate],
.#{$engine_css_prefix}-tr[data-agg=group] >.#{$engine_css_prefix}-td[data-renderer=aggregate] {
  padding-right: $lu_aggregate_square_bracket_width;
  cursor: pointer;

  &::after {
    border-top: $lu_aggregate_square_bracket_stroke_width solid $lu_aggregate_square_bracket_stroke_color;
    border-bottom: $lu_aggregate_square_bracket_stroke_width solid $lu_aggregate_square_bracket_stroke_color;
  }
}

.#{$engine_css_prefix}-tr[data-agg=group] >.#{$engine_css_prefix}-td[data-renderer=aggregate]::before {
  @include lu_icons();

  content: $lu_icon_caret_right;
}

.#{$lu_css_prefix}-summary[data-renderer=aggregate] {
  padding-right: $lu_aggregate_square_bracket_width;
  cursor: pointer;
  font-size: medium;
}
